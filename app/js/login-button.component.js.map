{"version":3,"sources":["login-button.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAUA;gBAMI,YAAoB,KAAW,EAAU,YAAyB;oBAA9C,UAAK,GAAL,KAAK,CAAM;oBAAU,iBAAY,GAAZ,YAAY,CAAa;oBAHlE,cAAS,GAAG,KAAK,CAAC;oBAId,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;wBAC1C,UAAU,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,QAAQ,CAAC;wBACrC,UAAU,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,QAAQ,CAAC;qBACxC,CAAC,CAAC;gBACP,CAAC;gBAED,KAAK;oBACD,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;gBACvB,CAAC;gBAED,QAAQ;oBACJ,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;oBAClC,GAAG,CAAC,CAAC,IAAI,OAAO,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;wBAC/C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC;oBACxD,CAAC;oBAAA,CAAC;oBAEF,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;wBACzD,IAAI,CAAC,KAAK,EAAE,CAAC;wBACb,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;oBACvB,CAAC;gBACL,CAAC;gBAED,KAAK;oBACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;oBAC9H,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,0CAA0C,EAAE,IAAI,CAAC;yBAC5D,GAAG,CAAC,CAAC,GAAa,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;yBAClC,SAAS,CAAC,QAAQ;wBACf,YAAY,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;oBAChD,CAAC,EACD,KAAK;wBACD,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;wBACpB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;oBAC9B,CAAC,CAAC,CAAC;gBACX,CAAC;YACL,CAAC;YAzCG;gBAAC,gBAAS,CAAC,YAAY,CAAC;;+DAAA;YAN5B;gBAAC,gBAAS,CAAC;oBACP,QAAQ,EAAE,cAAc;oBACxB,WAAW,EAAE,iCAAiC;oBAC9C,UAAU,EAAE,CAAC,gCAAgB,CAAC;iBACjC,CAAC;;oCAAA;YACF,uDA0CC,CAAA","file":"login-button.component.js","sourcesContent":["import { Component, ViewChild } from '@angular/core';\r\nimport { MODAL_DIRECTIVES, ModalComponent } from 'ng2-bs3-modal/ng2-bs3-modal';\r\nimport {Http, Response, Headers} from '@angular/http';\r\nimport { FormBuilder, Validators } from '@angular/common';\r\n\r\n@Component({\r\n    selector: 'login-button',\r\n    templateUrl: 'app/login-button.component.html',\r\n    directives: [MODAL_DIRECTIVES]\r\n})\r\nexport class LoginButtonComponent {\r\n    @ViewChild('loginModal')\r\n    modal: ModalComponent;\r\n    submitted = false;\r\n    loginFormModel: any;\r\n\r\n    constructor(private _http: Http, private _formBuilder: FormBuilder) {\r\n        this.loginFormModel = this._formBuilder.group({\r\n            'username': ['', Validators.required],\r\n            'password': ['', Validators.required]\r\n        });\r\n    }\r\n\r\n    close() {\r\n        this.modal.close();\r\n    }\r\n\r\n    onSubmit() {\r\n        this.loginFormModel.markAsDirty();\r\n        for (let control in this.loginFormModel.controls) {\r\n            this.loginFormModel.controls[control].markAsDirty();\r\n        };\r\n\r\n        if (this.loginFormModel.dirty && this.loginFormModel.valid) {\r\n            this.login();\r\n            this.modal.close();\r\n        }\r\n    }\r\n\r\n    login() {\r\n        this.submitted = true;\r\n        let body = JSON.stringify({ \"username\": this.loginFormModel.value.username, \"password\": this.loginFormModel.value.password });\r\n        this._http.post('http://localhost:8080/api/session/create', body)\r\n            .map((res: Response) => res.json())\r\n            .subscribe(response => {\r\n                localStorage.setItem('jwt', response.token);\r\n            },\r\n            error => {\r\n                alert(error.text());\r\n                console.log(error.text());\r\n            });\r\n    }\r\n}"],"sourceRoot":"/source/"}